"use strict";(self.webpackChunkmyBlog=self.webpackChunkmyBlog||[]).push([[690],{4293:(s,n,a)=>{a.r(n),a.d(n,{data:()=>e});const e={key:"v-8a2f55d2",path:"/notes/webpack-study.html",title:"",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"webpack是什么？",slug:"webpack是什么",children:[]},{level:2,title:"模块引入规范",slug:"模块引入规范",children:[]},{level:2,title:"安装webpack",slug:"安装webpack",children:[{level:3,title:"全局安装(不推荐，只能用一个版本号)",slug:"全局安装-不推荐-只能用一个版本号",children:[]},{level:3,title:"项目内安装",slug:"项目内安装",children:[]}]},{level:2,title:"提升webpack打包速度",slug:"提升webpack打包速度",children:[]},{level:2,title:"webpack的配置文件",slug:"webpack的配置文件",children:[]},{level:2,title:"运行webpack打包命令",slug:"运行webpack打包命令",children:[]},{level:2,title:"loader",slug:"loader",children:[{level:3,title:"file-loader做了哪些事情",slug:"file-loader做了哪些事情",children:[]},{level:3,title:"url-loader",slug:"url-loader",children:[]},{level:3,title:"css资源打包的loader",slug:"css资源打包的loader",children:[]}]},{level:2,title:"plugins",slug:"plugins",children:[]},{level:2,title:"sourceMap",slug:"sourcemap",children:[{level:3,title:"eval:是最快的一种打包方式",slug:"eval-是最快的一种打包方式",children:[]}]},{level:2,title:"监听代码改变自动打包三种方法",slug:"监听代码改变自动打包三种方法",children:[]}],filePathRelative:"notes/webpack-study.md",git:{updatedTime:null,contributors:[]}}},7238:(s,n,a)=>{a.r(n),a.d(n,{default:()=>p});const e=(0,a(6252).uE)('<h2 id="webpack是什么" tabindex="-1"><a class="header-anchor" href="#webpack是什么" aria-hidden="true">#</a> webpack是什么？</h2><p>webpack是一个模块打包工具，和webpack相似的工具有：grunt、gulp、browserify</p><h2 id="模块引入规范" tabindex="-1"><a class="header-anchor" href="#模块引入规范" aria-hidden="true">#</a> 模块引入规范</h2><ul><li>ES Moudule 模块引入方式</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&#39;./header.js&#39;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>CommonJS 模块引入规范</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Header <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./header.js&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>CMD</li><li>AMD</li></ul><h2 id="安装webpack" tabindex="-1"><a class="header-anchor" href="#安装webpack" aria-hidden="true">#</a> 安装webpack</h2><h3 id="全局安装-不推荐-只能用一个版本号" tabindex="-1"><a class="header-anchor" href="#全局安装-不推荐-只能用一个版本号" aria-hidden="true">#</a> 全局安装(不推荐，只能用一个版本号)</h3><p><code>npm install webpack webpack-cli -g</code></p><ul><li>使用：webpack index.js</li></ul><h3 id="项目内安装" tabindex="-1"><a class="header-anchor" href="#项目内安装" aria-hidden="true">#</a> 项目内安装</h3><p><code>npm install webpack webpack-cli -- save-dev</code></p><ul><li>使用：npx webpack index.js</li></ul><h2 id="提升webpack打包速度" tabindex="-1"><a class="header-anchor" href="#提升webpack打包速度" aria-hidden="true">#</a> 提升webpack打包速度</h2><ul><li><p>保持node版本尽量的新</p></li><li><p>webpack版本尽量的新</p></li></ul><h2 id="webpack的配置文件" tabindex="-1"><a class="header-anchor" href="#webpack的配置文件" aria-hidden="true">#</a> webpack的配置文件</h2><ul><li>webpack.config.js(默认文件名)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n\n      entry<span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span> <span class="token comment">//从哪个文件开始打包</span>\n\n      output<span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">//打包的文件放在哪里</span>\n\n      filename<span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span> <span class="token comment">//打包文件名</span>\n\n      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>_dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span> <span class="token comment">//放在哪个文件夹下</span>\n\n     <span class="token punctuation">}</span>\n\n <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>没有webpack.config.js文件</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> 使用webpack本身自带的默认配置\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>其他命名的配置文件(如webpackset.js)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> npx webpack <span class="token operator">--</span> config webpackset<span class="token punctuation">.</span><span class="token function">js</span> <span class="token punctuation">(</span>跟默认文件名不同<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="运行webpack打包命令" tabindex="-1"><a class="header-anchor" href="#运行webpack打包命令" aria-hidden="true">#</a> 运行webpack打包命令</h2><ul><li>global</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>webpack index<span class="token punctuation">.</span>js\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>项目内</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npx webpack index<span class="token punctuation">.</span>js\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>配置package.json中的scripts选项然后进行打包，如：</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm run bundle <span class="token operator">-</span><span class="token operator">&gt;</span> webpack\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="loader" tabindex="-1"><a class="header-anchor" href="#loader" aria-hidden="true">#</a> <strong>loader</strong></h2><blockquote><p>用来识别处理非js文件,是一种打包方案</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   module<span class="token operator">:</span><span class="token punctuation">{</span>\n\n      rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>\n\n      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\n       use<span class="token operator">:</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span> <span class="token punctuation">}</span>\n\n      <span class="token punctuation">}</span><span class="token punctuation">]</span>\n   <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="file-loader做了哪些事情" tabindex="-1"><a class="header-anchor" href="#file-loader做了哪些事情" aria-hidden="true">#</a> file-loader做了哪些事情</h3><h4 id="比如当发现引入了图片模块的时候-首先会把图片移动到dist目录下-会改名字-可自定义-返回图片的地址-理论上可以处理任何静态资源" tabindex="-1"><a class="header-anchor" href="#比如当发现引入了图片模块的时候-首先会把图片移动到dist目录下-会改名字-可自定义-返回图片的地址-理论上可以处理任何静态资源" aria-hidden="true">#</a> 比如当发现引入了图片模块的时候，首先会把图片移动到dist目录下， 会改名字(可自定义)，返回图片的地址，理论上可以处理任何静态资源</h4><h4 id="可以配置一些参数-options" tabindex="-1"><a class="header-anchor" href="#可以配置一些参数-options" aria-hidden="true">#</a> 可以配置一些参数：options</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   rules<span class="token operator">:</span><span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n\n      test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\n       use<span class="token operator">:</span><span class="token punctuation">{</span>\n\n      loader<span class="token operator">:</span><span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>\n\n      options<span class="token operator">:</span><span class="token punctuation">{</span>\n\n       name<span class="token operator">:</span><span class="token string">&#39;[name]_[hash].[ext]&#39;</span><span class="token punctuation">,</span> <span class="token comment">// name: ‘[name].[ext]’ // 占位符 老图片的名字，老图片的后缀</span>\n\n       outputPath<span class="token operator">:</span><span class="token string">&#39;images/&#39;</span><span class="token punctuation">,</span>\n\n       limit<span class="token operator">:</span><span class="token string">&#39;204800&#39;</span>\n\n  <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">]</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="url-loader" tabindex="-1"><a class="header-anchor" href="#url-loader" aria-hidden="true">#</a> url-loader</h3><ul><li><strong>会把图片转为base64文件放在js文件中</strong></li><li><strong>好处：节省了图片的http请求</strong></li><li><strong>坏处，使得js文件变大，使页面加载变慢</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n\n   mode<span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>\n\n   entry<span class="token operator">:</span><span class="token punctuation">{</span>\n\n   main <span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span>\n\n   <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  module<span class="token operator">:</span><span class="token punctuation">{</span>\n\n  rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>\n\n   test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(jpg|png|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n\n   use<span class="token operator">:</span><span class="token punctuation">{</span>\n\n  loader <span class="token operator">:</span> <span class="token string">&#39;url-loader&#39;</span><span class="token punctuation">,</span>\n\n   options <span class="token operator">:</span> <span class="token punctuation">{</span>\n\n   name<span class="token operator">:</span> <span class="token string">&#39;[name]_[hash].ext&#39;</span><span class="token punctuation">,</span>\n\n  outputPath<span class="token operator">:</span> <span class="token string">&#39;images/&#39;</span><span class="token punctuation">,</span>\n\n  limit<span class="token operator">:</span> <span class="token number">2048</span> <span class="token comment">//小于2048个字节的话使用url-loader变成base64的字符串，否则生成文件</span>\n   <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="css资源打包的loader" tabindex="-1"><a class="header-anchor" href="#css资源打包的loader" aria-hidden="true">#</a> css资源打包的loader</h3><ul><li><p>css-loader 和 style-loader css-loader配合style-loader去处理打包</p></li><li><p>css预处理器loader 使用css预处理器时需要安装对应的css预处理器loader，如sass需要安装node-sass 和 node-sass</p></li><li><p>css添加厂商前缀的loader：postcss-loader</p></li><li><p>css打包模块化：各个css文件互不影响，互不耦合和冲突</p></li></ul><h2 id="plugins" tabindex="-1"><a class="header-anchor" href="#plugins" aria-hidden="true">#</a> <strong>plugins</strong></h2><blockquote><p>可以在webpack 运行到某个时刻的时候，帮你做一些事情</p></blockquote><ul><li>htmlWebpackPlugin 会在打包结束后，自动生成一个html文件，并把打包生成的js自动引入到这个html文件中</li><li>clean-webpack-plugin 第三方插件，用于打包成功前清空dist文件夹</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\n   template<span class="token operator">:</span><span class="token string">&#39;./index.html&#39;</span>\n\n   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;dist&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="sourcemap" tabindex="-1"><a class="header-anchor" href="#sourcemap" aria-hidden="true">#</a> <strong>sourceMap</strong></h2><p>它是一个映射关系，默认是被配置的，假如它知道dist目录下main.js文件96行出错了，实际上对应的是src目录下index.js文件中的第一行它会帮你提示当前其实是index.js中第一行代码出错了</p><ul><li>最佳组合：可以知道源代码出错的地方，而不是打包后的代码哪里出错了</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   module<span class="token punctuation">.</span>exports <span class="token operator">=</span><span class="token punctuation">{</span>\n\n   mode<span class="token operator">:</span><span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>\n\n   devtool<span class="token operator">:</span><span class="token string">&#39;cheap-module-eval-source-map&#39;</span><span class="token punctuation">,</span>\n\n   <span class="token comment">// devtool:&#39;cheap-module-source-map&#39;, //线上的生产环境</span>\n\n   <span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="eval-是最快的一种打包方式" tabindex="-1"><a class="header-anchor" href="#eval-是最快的一种打包方式" aria-hidden="true">#</a> eval:是最快的一种打包方式</h3><h2 id="监听代码改变自动打包三种方法" tabindex="-1"><a class="header-anchor" href="#监听代码改变自动打包三种方法" aria-hidden="true">#</a> 监听代码改变自动打包三种方法</h2>',53),p={render:function(s,n){return e}}}}]);